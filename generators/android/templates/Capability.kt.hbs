package {{packageName}}.capabilities

import {{packageName}}.mqtt.RobotMQTT
import {{packageName}}.RobotClient
import {{packageName}}.events.*
import {{packageName}}.commands.*

/**
 * AUTO-GENERATED FILE â€” DO NOT EDIT
 *
 * Capability: {{capabilityName}}
 */
class {{className}}Capability(
    private val client: RobotClient,
    private val mqtt: RobotMQTT
) {

    // Commands implemented by this capability
    fun supportedCommands(): List<String> = listOf(
        {{#each commands}}
        "{{this}}"{{#unless @last}},{{/unless}}
        {{/each}}
    )

    fun handleCommand(command: String, payload: String?) {
        when (command) {
            {{#each commands}}
            "{{this}}" -> client.on{{capitalize this}}(payload)
            {{/each}}
            else -> mqtt.publishError("Unknown command '{{this}}' in {{capabilityName}}")
        }
    }
}